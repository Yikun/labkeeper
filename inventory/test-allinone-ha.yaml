all:
  hosts:
    bastion:
      ansible_connection: local
    allinone01:
      ansible_host: 10.3.0.1
    allinone02:
      ansible_host: 10.3.0.2
    zk03:
      ansible_host: 10.3.0.3
  vars:
    nodepool_file_nodepool_yaml_src: "{{ labkeeper_src_dir }}/tests/nodepool/fake-nodepool.yaml.j2"
    nodepool_clouds_src: "{{ labkeeper_config_git_dest }}/nodepool/fake-clouds.yaml.j2"

  children:
    master:
      children:
        nodepool:
          children:
            nodepool-builder:
              hosts: allinone01
            nodepool-launcher:
              hosts: allinone01
        zuul:
          children:
            zuul-scheduler:
              hosts: allinone01
            zuul-executor:
              hosts: allinone01
            zuul-web:
              hosts: allinone01
            zuul-merger:
              hosts: allinone01
            zuul-fingergw:
              hosts: allinone01
            zuul-log-server:
              hosts: allinone01
          vars:
            zuul_public_ip: 80.158.7.173
        gear:
          hosts: allinone01
        statsd:
          hosts: allinone01
        zookeeper:
          hosts: allinone01
        mysql:
          hosts: allinone01
        apache:
          hosts: allinone01

    slave:
      children:
        nodepool:
          children:
            nodepool-builder:
              hosts: allinone02
            nodepool-launcher:
              hosts: allinone02
        zuul:
          children:
            zuul-scheduler:
              hosts: allinone02
            zuul-executor:
              hosts: allinone02
            zuul-web:
              hosts: allinone02
            zuul-merger:
              hosts: allinone02
            zuul-fingergw:
              hosts: allinone02
            zuul-log-server:
              hosts: allinone02
          vars:
            zuul_public_ip: 80.158.7.173
        gear:
          hosts: allinone02
        statsd:
          hosts: allinone02
        zookeeper:
          hosts: allinone02
        mysql:
          hosts: allinone02
        apache:
          hosts: allinone02

    zookeeper3:
      children:
        zookeeper:
          hosts: zk03
